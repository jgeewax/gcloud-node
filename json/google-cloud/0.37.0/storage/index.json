{"id":"storage","type":"class","name":"Storage","description":"<p>The <code>gcloud.storage</code> object contains a <code>bucket</code> function, which is how you will interact with your Google Cloud Storage bucket.</p><p>To learn more about Cloud Storage, see the <a href=\"https://cloud.google.com/storage/docs/overview\">Google Cloud Storage overview</a>.</p><p><h4>ACLs</h4> Google Cloud Storage uses access control lists (ACLs) to manage object and bucket access. ACLs are the mechanism you use to share files with other users and allow other users to access your buckets and files.</p><p>To learn more about ACLs, read this overview on <a href=\"https://cloud.google.com/storage/docs/access-control\">Access Control</a>.</p>","source":"lib/storage/index.js","parent":null,"children":["storage/bucket","storage/channel","storage/file"],"methods":[{"id":"Storage","name":"Storage","type":"constructor","description":"<p>To access your Cloud Storage buckets, you will use the <code>bucket</code> function returned from this <code>storage</code> object.</p><p>The examples below will demonstrate the different usage patterns your app may need to connect to <code>gcloud</code> and access your bucket.</p>","source":"lib/storage/index.js#L101","resources":[],"examples":[{"code":"var gcloud = require('gcloud')({\n  keyFilename: '/path/to/keyfile.json',\n  projectId: 'my-project'\n});\n\nvar gcs = gcloud.storage();"}],"params":[{"name":"options","description":"<ul> <li><a href=\"#/docs\">Configuration object</a>.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"acl","name":"acl","type":"instance","description":"<p>Google Cloud Storage uses access control lists (ACLs) to manage object and bucket access. ACLs are the mechanism you use to share objects with other users and allow other users to access your buckets and objects.</p><p>This object provides constants to refer to the three permission levels that can be granted to an entity:</p><ul> <li><code>gcs.acl.OWNER_ROLE</code> - (&quot;OWNER&quot;)</li> <li><code>gcs.acl.READER_ROLE</code> - (&quot;READER&quot;)</li> <li><code>gcs.acl.WRITER_ROLE</code> - (&quot;WRITER&quot;)</li> </ul> ","source":"lib/storage/index.js#L167","resources":[{"title":"About Access Control Lists","link":"https://cloud.google.com/storage/docs/access-control#About-Access-Control-Lists"}],"examples":[{"code":"var gcs = gcloud.storage({\n  projectId: 'grape-spaceship-123'\n});\n\nvar albums = gcs.bucket('albums');"},{"caption":"<p>Make all of the files currently in a bucket publicly readable.</p>","code":"albums.acl.add({\n  entity: 'allUsers',\n  role: gcs.acl.READER_ROLE\n}, function(err, aclObject) {});"},{"caption":"<p>Make any new objects added to a bucket publicly readable.</p>","code":"albums.acl.default.add({\n  entity: 'allUsers',\n  role: gcs.acl.READER_ROLE\n}, function(err, aclObject) {});"},{"caption":"<p>Grant a user ownership permissions to a bucket.</p>","code":"albums.acl.add({\n  entity: 'user-useremail@example.com',\n  role: gcs.acl.OWNER_ROLE\n}, function(err, aclObject) {});"}],"params":[],"exceptions":[],"returns":[]},{"id":"bucket","name":"bucket","type":"instance","description":"<p>Get a reference to a Google Cloud Storage bucket.</p>","source":"lib/storage/index.js#L192","resources":[],"examples":[{"code":"var gcloud = require('gcloud')({\n  projectId: 'grape-spaceship-123',\n  keyFilename: '/path/to/keyfile.json'\n});\n\nvar gcs = gcloud.storage();\n\nvar albums = gcs.bucket('albums');\nvar photos = gcs.bucket('photos');"}],"params":[{"name":"name","description":"<ul> <li>Name of the bucket.</li> </ul> ","types":["object","string"],"optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"storage/bucket\" data-method=\"\">storage/bucket</a>"],"description":""}]},{"id":"channel","name":"channel","type":"instance","description":"<p>Reference a channel to receive notifications about changes to your bucket.</p>","source":"lib/storage/index.js#L210","resources":[],"examples":[{"code":"var channel = gcs.channel('id', 'resource-id');"}],"params":[{"name":"id","description":"<ul> <li>The ID of the channel.</li> </ul> ","types":["string"],"optional":false,"nullable":false},{"name":"resourceId","description":"<ul> <li>The resource ID of the channel.</li> </ul> ","types":["string"],"optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"storage/channel\" data-method=\"\">storage/channel</a>"],"description":""}]},{"id":"createBucket","name":"createBucket","type":"instance","description":"<p>Create a bucket.</p><p>Google Cloud Storage uses a flat namespace, so you can&#39;t create a bucket with a name that is already in use. For more information, see <a href=\"https://cloud.google.com/storage/docs/bucketnaming.html#requirements\">Bucket Naming Guidelines</a>.</p>","source":"lib/storage/index.js#L270","resources":[{"title":"Buckets: insert API Documentation","link":"https://cloud.google.com/storage/docs/json_api/v1/buckets/insert"},{"title":"Durable Reduced Availability","link":"https://cloud.google.com/storage/docs/durable-reduced-availability"},{"title":"Nearline","link":"https://cloud.google.com/storage/docs/nearline"},{"title":"Storage Classes","link":"https://cloud.google.com/storage/docs/storage-classes"}],"examples":[{"code":"var callback = function(err, bucket, apiResponse) {\n  // `bucket` is a Bucket object.\n};\n\ngcs.createBucket('new-bucket', callback);"},{"caption":"<p>Create a bucket in a specific location and region. <em>See the <a \nhref=\"https://cloud.google.com/storage/docs/json_api/v1/buckets/insert\"> \nOfficial JSON API docs</a> for complete details on the <code>location</code> option. \n</em></p>","code":"var metadata = {\n  location: 'US-CENTRAL1',\n  dra: true\n};\n\ngcs.createBucket('new-bucket', metadata, callback);"},{"caption":"<p>Enable versioning on a new bucket.</p>","code":"var metadata = {\n  versioning: {\n    enabled: true\n  }\n};\n\ngcs.createBucket('new-bucket', metadata, callback);"}],"params":[{"name":"name","description":"<ul> <li>Name of the bucket to create.</li> </ul> ","types":["string"],"optional":false,"nullable":false},{"name":"metadata","description":"<ul> <li>Metadata to set for the bucket.</li> </ul> ","types":["object"],"optional":true,"nullable":false},{"name":"metadata.dra","description":"<ul> <li>Specify the storage class as <a href=\"https://goo.gl/26lthK\">Durable Reduced Availability</a>.</li> </ul> ","types":["boolean"],"optional":true,"nullable":false},{"name":"metadata.nearline","description":"<ul> <li>Specify the storage class as <a href=\"https://goo.gl/sN5wNh\">Nearline</a>.</li> </ul> ","types":["boolean"],"optional":true,"nullable":false},{"name":"callback","description":"<ul> <li>The callback function.</li> </ul> ","types":["function"],"optional":false,"nullable":false},{"name":"callback.err","description":"<ul> <li>An error returned while making this request</li> </ul> ","types":["error"],"optional":false,"nullable":true},{"name":"callback.bucket","description":"<ul> <li>The newly created Bucket.</li> </ul> ","types":["<a data-custom-type=\"storage/bucket\" data-method=\"\">storage/bucket</a>"],"optional":false,"nullable":false},{"name":"callback.apiResponse","description":"<ul> <li>The full API response.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[{"type":"Error","description":"<p>If a name is not provided.</p>"}],"returns":[]},{"id":"getBuckets","name":"getBuckets","type":"instance","description":"<p>Get Bucket objects for all of the buckets in your project.</p>","source":"lib/storage/index.js#L389","resources":[{"title":"Buckets: list API Documentation","link":"https://cloud.google.com/storage/docs/json_api/v1/buckets/list"}],"examples":[{"code":"gcs.getBuckets(function(err, buckets) {\n  if (!err) {\n    // buckets is an array of Bucket objects.\n  }\n});"},{"caption":"<p>To control how many API requests are made and page through the results \nmanually, set <code>autoPaginate</code> to <code>false</code>.</p>","code":"var callback = function(err, buckets, nextQuery, apiResponse) {\n  if (nextQuery) {\n    // More results exist.\n    gcs.getBuckets(nextQuery, callback);\n  }\n\n  // The `metadata` property is populated for you with the metadata at the\n  // time of fetching.\n  buckets[0].metadata;\n\n  // However, in cases where you are concerned the metadata could have\n  // changed, use the `getMetadata` method.\n  buckets[0].getMetadata(function(err, metadata, apiResponse) {});\n};\n\ngcs.getBuckets({\n  autoPaginate: false\n}, callback);"},{"caption":"<p>Get the buckets from your project as a readable object stream.</p>","code":"gcs.getBuckets()\n  .on('error', console.error)\n  .on('data', function(bucket) {\n    // bucket is a Bucket object.\n  })\n  .on('end', function() {\n    // All buckets retrieved.\n  });"},{"caption":"<p>If you anticipate many results, you can end a stream early to prevent \nunnecessary processing and API requests.</p>","code":"gcs.getBuckets()\n  .on('data', function(bucket) {\n    this.end();\n  });"}],"params":[{"name":"query","description":"<ul> <li>Query object.</li> </ul> ","types":["object"],"optional":true,"nullable":false},{"name":"query.autoPaginate","description":"<ul> <li>Have pagination handled automatically. Default: true.</li> </ul> ","types":["boolean"],"optional":false,"nullable":false},{"name":"query.maxApiCalls","description":"<ul> <li>Maximum number of API calls to make.</li> </ul> ","types":["number"],"optional":false,"nullable":false},{"name":"query.maxResults","description":"<ul> <li>Maximum number of items plus prefixes to return.</li> </ul> ","types":["number"],"optional":false,"nullable":false},{"name":"query.pageToken","description":"<ul> <li>A previously-returned page token representing part of the larger set of results to view.</li> </ul> ","types":["string"],"optional":false,"nullable":false},{"name":"callback","description":"<ul> <li>The callback function.</li> </ul> ","types":["function"],"optional":true,"nullable":false},{"name":"callback.err","description":"<ul> <li>An error returned while making this request</li> </ul> ","types":["error"],"optional":false,"nullable":true},{"name":"callback.buckets","description":"<ul> <li>List of all Buckets.</li> </ul> ","types":["<a data-custom-type=\"storage/bucket[]\" data-method=\"\">storage/bucket[]</a>"],"optional":false,"nullable":false},{"name":"callback.nextQuery","description":"<ul> <li>If present, query with this object to check for more results.</li> </ul> ","types":["object"],"optional":false,"nullable":true},{"name":"callback.apiResponse","description":"<ul> <li>The full API response.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[],"returns":[]}]}